<!DOCTYPE html>

<head>

    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width">

    <link href="{{ url_for('static', path='/style.css') }}" rel="stylesheet">

    <script src="https://unpkg.com/htmx.org@latest/dist/htmx.min.js"></script>

</head>

<script>
    document.addEventListener("htmx:configRequest", function (event) {
        if (event.detail.verb === "post") {
            // Show the loading box when a POST request is triggered
            document.getElementById("loadingBox").style.display = "block";
        }
        if (event.detail.verb === "get") {
            // Show the loading box when a POST request is triggered
            document.getElementById("hash_output").style.display = "block";
        }
    });

    document.addEventListener("htmx:afterRequest", function (event) {
        const response = event.detail.xhr.response;

        const jsonResponse = JSON.parse(response);

        const hashes = jsonResponse.data[0].hashes;

        const hashText = `MD5: ${hashes.md5}<br>SHA1: ${hashes.sha1}<br>SHA256: ${hashes.sha256}<br>SHA512: ${hashes.sha512}`;
        document.getElementById("loadingBox").innerHTML = hashText;
    });

</script>

<body>

    <header>



        <div class="logo">



            <h1 id="blackoutline">



                <p>Darkmoon</p>



            </h1>



        </div>



        <nav>



            <ul>

                <button class="dropbtn"><a href="/webpages">Home</a></button>

                <div class="dropdown">



                    <button class="button button1">Tools</button>



                    <div class="dropdown-content">



                        <a href="/webpages/hash-lookup">Hash Lookup</a>



                        <a href="/webpages/upload">ISO Upload</a>



                    </div>



                </div>

                <button class="dropbtn"><a href="#">Credit</a></button>

            </ul>



        </nav>



    </header>

    <div style="padding:90px;">

        <h1></h1>

        <form id="hash_upload" hx-get="/metadata/hashSearch" hx-target="#hash_output" hx-trigger="submit"
            hx-indicator="hash_output">

            <h2> Hash and Hash Type </h2>

            <input id="fullHash" name="fullHash" required="required" type="text"
                placeholder="Ex: sha256:sdlkfjksldklsdjsdfklj" /><br>

            <input type="submit" value="Submit" />

        </form>

        <div class="result_box" id="hash_output" style="display: none;" hx-swap="innerHTML">
            <div class="loading-spinner" style="padding:30px; object-position: center;"></div>
        </div>

        <h2></h2>

        <form id="file_upload" hx-trigger="submit" hx-post='/metadata/hashComparison' hx-target="#loadingBox"
            hx-swap="innerHTML" hx-encoding='multipart/form-data'>

            <h2> Upload File </h2>

            <input id="fileInput" type="file" required="required" name="fileInput"><br>

            <h2> ISO Key </h2>

            <input id="sourceIsoName" name="sourceIsoName" required="required" type="text"><br>

            <input type="submit" value="Upload" hx-indicator="#loadingBox">

        </form>

        <div class="result_box" id="loadingBox" style="display: none;">
            <div class="loading-spinner" style="padding:30px; object-position: center;"></div>
        </div>

    </div>

</body>



</html>
